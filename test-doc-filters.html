<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>文档分类功能测试</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>
    <div style="padding: 20px;">
        <h1>文档分类功能测试页面</h1>
        <p>这个页面用于测试文档分类筛选功能。</p>
        
        <button id="addTestDocs" class="btn-primary" style="margin: 20px 0;">
            <i class="fas fa-plus"></i> 添加测试文档数据
        </button>
        
        <button id="clearData" class="btn-secondary" style="margin: 20px 0;">
            <i class="fas fa-trash"></i> 清空数据
        </button>
        
        <!-- 复制文档分类筛选器 -->
        <div class="document-filters">
            <div class="filter-group">
                <label for="docTypeFilter">文件类型：</label>
                <select id="docTypeFilter" class="filter-select">
                    <option value="all">所有类型</option>
                    <option value="pdf">PDF 文档</option>
                    <option value="word">Word 文档</option>
                    <option value="excel">Excel 表格</option>
                    <option value="powerpoint">PPT 演示</option>
                    <option value="text">文本文件</option>
                    <option value="other">其他文件</option>
                </select>
            </div>
            
            <div class="filter-group">
                <label for="docTagFilter">标签分类：</label>
                <select id="docTagFilter" class="filter-select">
                    <option value="all">所有标签</option>
                    <!-- 标签选项会动态生成 -->
                </select>
            </div>
            
            <div class="filter-group">
                <label for="docSortFilter">排序方式：</label>
                <select id="docSortFilter" class="filter-select">
                    <option value="newest">最新优先</option>
                    <option value="oldest">最旧优先</option>
                    <option value="name">按名称</option>
                    <option value="size">按大小</option>
                    <option value="type">按类型</option>
                </select>
            </div>
            
            <div class="filter-group">
                <button id="clearDocFilters" class="btn-secondary filter-clear-btn">
                    <i class="fas fa-times"></i> 清除筛选
                </button>
            </div>
        </div>
        
        <!-- 分类统计信息 -->
        <div class="document-stats" id="documentStats">
            <!-- 统计信息会动态生成 -->
        </div>
        
        <div class="content-grid" id="documentsGrid">
            <!-- 文档内容会动态生成 -->
        </div>
    </div>

    <script src="script.js"></script>
    <script>
        // 等待页面加载完成
        document.addEventListener('DOMContentLoaded', () => {
            console.log('文档分类测试页面加载完成');
            
            // 添加测试数据按钮事件
            document.getElementById('addTestDocs').addEventListener('click', () => {
                addTestDocuments();
            });
            
            // 清空数据按钮事件
            document.getElementById('clearData').addEventListener('click', () => {
                clearAllData();
            });
            
            // 初始化显示
            refreshDocumentDisplay();
        });
        
        // 添加测试文档数据
        function addTestDocuments() {
            if (!window.knowledgeBase) {
                console.error('知识库系统未初始化');
                return;
            }
            
            const testDocs = [
                {
                    id: 'test-doc-1',
                    name: '项目计划.pdf',
                    type: 'application/pdf',
                    size: 2 * 1024 * 1024,
                    tags: ['工作', '计划', '项目'],
                    uploadDate: new Date('2024-01-15').toISOString(),
                    category: 'documents'
                },
                {
                    id: 'test-doc-2',
                    name: '会议纪要.docx',
                    type: 'application/vnd.openxmlformats-officedocument.wordprocessingml.document',
                    size: 1.5 * 1024 * 1024,
                    tags: ['工作', '会议', '纪要'],
                    uploadDate: new Date('2024-02-10').toISOString(),
                    category: 'documents'
                },
                {
                    id: 'test-doc-3',
                    name: '数据分析.xlsx',
                    type: 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet',
                    size: 3 * 1024 * 1024,
                    tags: ['数据', '分析', '统计'],
                    uploadDate: new Date('2024-03-05').toISOString(),
                    category: 'documents'
                },
                {
                    id: 'test-doc-4',
                    name: '产品演示.pptx',
                    type: 'application/vnd.openxmlformats-officedocument.presentationml.presentation',
                    size: 5 * 1024 * 1024,
                    tags: ['产品', '演示', '汇报'],
                    uploadDate: new Date('2024-03-20').toISOString(),
                    category: 'documents'
                },
                {
                    id: 'test-doc-5',
                    name: '学习笔记.txt',
                    type: 'text/plain',
                    size: 500 * 1024,
                    tags: ['学习', '笔记', '总结'],
                    uploadDate: new Date('2024-04-01').toISOString(),
                    category: 'documents'
                },
                {
                    id: 'test-doc-6',
                    name: '技术文档.pdf',
                    type: 'application/pdf',
                    size: 4 * 1024 * 1024,
                    tags: ['技术', '文档', '开发'],
                    uploadDate: new Date('2024-04-15').toISOString(),
                    category: 'documents'
                },
                {
                    id: 'test-doc-7',
                    name: '财务报告.xlsx',
                    type: 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet',
                    size: 2.5 * 1024 * 1024,
                    tags: ['财务', '报告', '数据'],
                    uploadDate: new Date('2024-05-01').toISOString(),
                    category: 'documents'
                }
            ];
            
            // 清空现有文档然后添加测试数据
            window.knowledgeBase.data.documents = [];
            testDocs.forEach(doc => {
                window.knowledgeBase.data.documents.push(doc);
            });
            
            // 保存数据并刷新显示
            window.knowledgeBase.saveData();
            refreshDocumentDisplay();
            
            window.knowledgeBase.showToast('成功', `已添加 ${testDocs.length} 个测试文档`, 'success');
        }
        
        // 清空所有数据
        function clearAllData() {
            if (!window.knowledgeBase) {
                console.error('知识库系统未初始化');
                return;
            }
            
            window.knowledgeBase.data.documents = [];
            window.knowledgeBase.saveData();
            refreshDocumentDisplay();
            
            window.knowledgeBase.showToast('成功', '已清空所有文档数据', 'success');
        }
        
        // 刷新文档显示
        function refreshDocumentDisplay() {
            if (!window.knowledgeBase) {
                console.error('知识库系统未初始化');
                return;
            }
            
            // 初始化文档分类功能
            window.knowledgeBase.setupDocumentFilters();
            window.knowledgeBase.showDocuments();
        }
    </script>
</body>
</html>